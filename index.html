<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOKLUCK - ê¸€ ì“°ê³  ë•… ì‚¬ëŠ” Web3 ì»¤ë®¤ë‹ˆí‹°</title>
    <meta name="description" content="BOKLUCKì—ì„œ ì½˜í…ì¸ ë¥¼ ì‘ì„±í•˜ê³  BOK í† í°ì„ ë°›ìœ¼ì„¸ìš”.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --secondary: #06b6d4;
            --accent: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --pink: #ec4899;
            --bg-dark: #0a0a0f;
            --bg-card: #12121a;
            --bg-card-hover: #1a1a25;
            --border: #2a2a3a;
            --text: #f0f0f5;
            --text-muted: #8888a0;
            --gradient-primary: linear-gradient(135deg, #6366f1 0%, #06b6d4 100%);
            --gradient-gold: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            --gradient-pink: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
        }
        body { 
            background-color: var(--bg-dark);
            background-image: radial-gradient(ellipse at top, rgba(99, 102, 241, 0.1) 0%, transparent 50%);
            color: var(--text); 
            font-family: 'Noto Sans KR', sans-serif; 
            min-height: 100vh;
        }
        
        /* ë„¤ë¹„ê²Œì´ì…˜ */
        .navbar {
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            padding: 12px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo { 
            font-size: 24px; 
            font-weight: 900; 
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            cursor: pointer;
        }
        .nav-links {
            display: flex;
            gap: 8px;
        }
        .nav-link {
            padding: 8px 16px;
            border-radius: 8px;
            color: var(--text-muted);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }
        .nav-link:hover, .nav-link.active {
            background: var(--bg-card-hover);
            color: var(--text);
        }
        .wallet-badge {
            background: var(--bg-dark);
            padding: 8px 16px;
            border-radius: 50px;
            border: 1px solid var(--border);
            color: var(--secondary);
            font-weight: 700;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .level-badge {
            background: var(--gradient-gold);
            color: #1a1a2e;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px 20px;
        }
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        /* ì¹´ë“œ */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s;
        }
        .card:hover {
            border-color: rgba(99, 102, 241, 0.3);
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        .card-title {
            font-size: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ë²„íŠ¼ */
        button {
            cursor: pointer;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            padding: 12px 20px;
            transition: all 0.3s;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 14px;
        }
        button:hover { transform: translateY(-2px); }
        button:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }
        .btn-gold {
            background: var(--gradient-gold);
            color: #1a1a2e;
        }
        .btn-pink {
            background: var(--gradient-pink);
            color: white;
        }
        .btn-outline {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text);
        }
        .btn-sm {
            padding: 8px 14px;
            font-size: 13px;
        }
        .btn-block { width: 100%; }

        /* íˆì–´ë¡œ ì„¹ì…˜ */
        .hero {
            text-align: center;
            padding: 60px 20px;
            background: var(--bg-card);
            border-radius: 24px;
            margin-bottom: 24px;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }
        .hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 3px;
            background: var(--gradient-primary);
        }
        .hero-badge {
            display: inline-block;
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.3);
            color: var(--primary-light);
            padding: 6px 16px;
            border-radius: 50px;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 20px;
        }
        .hero-title {
            font-size: 36px;
            font-weight: 900;
            margin-bottom: 16px;
            line-height: 1.3;
        }
        .hero-title .highlight {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .hero-subtitle {
            font-size: 16px;
            color: var(--text-muted);
            margin-bottom: 32px;
        }

        /* í†µê³„ ë°” */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 32px;
        }
        .stat-item { text-align: center; }
        .stat-number {
            font-size: 28px;
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .stat-label {
            font-size: 13px;
            color: var(--text-muted);
        }

        /* ê¸°ëŠ¥ ì¹´ë“œ */
        .feature-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        .feature-card:hover {
            transform: translateY(-4px);
            border-color: var(--primary);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.15);
        }
        .feature-icon { font-size: 40px; margin-bottom: 16px; }
        .feature-title { font-weight: 700; margin-bottom: 8px; }
        .feature-desc { font-size: 13px; color: var(--text-muted); }

        /* ë¯¸ì…˜ ì•„ì´í…œ */
        .mission-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: var(--bg-dark);
            border-radius: 12px;
            margin-bottom: 10px;
            border: 1px solid var(--border);
        }
        .mission-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .mission-icon {
            width: 40px;
            height: 40px;
            background: var(--bg-card-hover);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        .mission-title { font-weight: 600; font-size: 14px; }
        .mission-progress {
            font-size: 12px;
            color: var(--text-muted);
        }
        .mission-reward {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }
        .mission-complete {
            background: var(--success);
            color: white;
        }

        /* í”„ë¡œê·¸ë ˆìŠ¤ ë°” */
        .progress-bar {
            height: 8px;
            background: var(--bg-dark);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }
        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* ë­í‚¹ */
        .ranking-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg-dark);
            border-radius: 10px;
            margin-bottom: 8px;
        }
        .ranking-position {
            width: 28px;
            height: 28px;
            background: var(--bg-card-hover);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 13px;
        }
        .ranking-position.gold { background: var(--gradient-gold); color: #1a1a2e; }
        .ranking-position.silver { background: linear-gradient(135deg, #94a3b8, #cbd5e1); color: #1a1a2e; }
        .ranking-position.bronze { background: linear-gradient(135deg, #b45309, #d97706); color: white; }
        .ranking-name { flex: 1; font-weight: 500; }
        .ranking-score { color: var(--secondary); font-weight: 700; }

        /* ë£°ë › */
        .roulette-container {
            text-align: center;
            padding: 20px;
        }
        .roulette-wheel {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: conic-gradient(
                var(--primary) 0deg 45deg,
                var(--secondary) 45deg 90deg,
                var(--accent) 90deg 135deg,
                var(--success) 135deg 180deg,
                var(--pink) 180deg 225deg,
                var(--danger) 225deg 270deg,
                var(--primary-light) 270deg 315deg,
                #fbbf24 315deg 360deg
            );
            margin: 0 auto 20px;
            position: relative;
            transition: transform 3s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.3);
        }
        .roulette-wheel::before {
            content: 'ğŸ¯';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
            background: var(--bg-dark);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .roulette-pointer {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
        }

        /* í”„ë¡œí•„ */
        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 24px;
        }
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
        }
        .profile-info h2 {
            font-size: 24px;
            margin-bottom: 4px;
        }
        .profile-stats {
            display: flex;
            gap: 20px;
            color: var(--text-muted);
            font-size: 14px;
        }

        /* ì—…ì  */
        .achievement-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px;
            background: var(--bg-dark);
            border-radius: 12px;
            margin-bottom: 10px;
            border: 1px solid var(--border);
        }
        .achievement-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
        }
        .achievement-locked {
            background: var(--bg-card-hover);
            opacity: 0.5;
        }
        .achievement-unlocked {
            background: var(--gradient-gold);
        }
        .achievement-info { flex: 1; }
        .achievement-title { font-weight: 600; font-size: 14px; }
        .achievement-desc { font-size: 12px; color: var(--text-muted); }

        /* ê²Œì‹œíŒ ëª©ë¡ */
        .board-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--bg-dark);
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid var(--border);
        }
        .board-item:hover {
            background: var(--bg-card-hover);
            border-color: var(--primary);
        }
        .board-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        .board-info { flex: 1; }
        .board-name { font-weight: 700; margin-bottom: 4px; }
        .board-meta { font-size: 12px; color: var(--text-muted); }
        .board-stats {
            display: flex;
            gap: 16px;
            font-size: 12px;
            color: var(--text-muted);
        }
        .board-fee {
            background: rgba(245, 158, 11, 0.1);
            color: var(--accent);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        /* íƒ­ */
        .tabs {
            display: flex;
            gap: 4px;
            background: var(--bg-dark);
            padding: 4px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        .tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-muted);
        }
        .tab.active {
            background: var(--bg-card);
            color: var(--text);
        }

        /* ëª¨ë‹¬ */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(8px);
        }
        .modal-content {
            background: var(--bg-card);
            padding: 32px;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid var(--border);
            position: relative;
        }
        .modal-close {
            position: absolute;
            top: 16px; right: 16px;
            background: var(--bg-dark);
            border: none;
            width: 32px; height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            color: var(--text-muted);
        }
        .modal-title {
            font-size: 22px;
            font-weight: 900;
            margin-bottom: 20px;
            text-align: center;
        }

        /* ì…ë ¥ í•„ë“œ */
        input, textarea, select {
            width: 100%;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 14px 16px;
            border-radius: 10px;
            font-size: 15px;
            font-family: 'Noto Sans KR', sans-serif;
            margin-bottom: 12px;
            transition: all 0.2s;
        }
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary);
        }
        label {
            display: block;
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 6px;
            font-weight: 500;
        }

        /* í† ê¸€ ìŠ¤ìœ„ì¹˜ */
        .toggle-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }
        .toggle-label { font-size: 14px; }
        .toggle-switch {
            width: 48px;
            height: 26px;
            background: var(--bg-dark);
            border-radius: 13px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }
        .toggle-switch.active { background: var(--success); }
        .toggle-switch::before {
            content: '';
            position: absolute;
            top: 3px; left: 3px;
            width: 20px; height: 20px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s;
        }
        .toggle-switch.active::before { left: 25px; }

        /* ì´ˆëŒ€ ì½”ë“œ */
        .invite-box {
            background: var(--bg-dark);
            border: 2px dashed var(--border);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        .invite-code {
            font-size: 24px;
            font-weight: 900;
            letter-spacing: 4px;
            color: var(--secondary);
            margin: 12px 0;
        }

        .hidden { display: none !important; }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
            .nav-links { display: none; }
            .hero-title { font-size: 26px; }
            .stats-bar { gap: 20px; }
            .stat-number { font-size: 22px; }
        }
    </style>
</head>
<body>
    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo" onclick="showSection('home')">BOKLUCK</div>
            <div class="nav-links" id="navLinks">
                <a href="#" class="nav-link active" onclick="showSection('home')">ğŸ  í™ˆ</a>
                <a href="#" class="nav-link" onclick="showSection('boards')">ğŸ“‚ ê²Œì‹œíŒ</a>
                <a href="market.html" class="nav-link">ğŸ—ºï¸ ë¶€ë™ì‚°</a>
                <a href="board-market.html" class="nav-link">ğŸª ë§ˆì¼“</a>
                <a href="#" class="nav-link" onclick="showSection('profile')">ğŸ‘¤ í”„ë¡œí•„</a>
            </div>
            <div style="display: flex; align-items: center; gap: 12px;">
                <span class="level-badge" id="levelBadge">Lv.1</span>
                <div class="wallet-badge" id="walletBadge">ğŸ’° ì—°ê²° í•„ìš”</div>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- ë¡œê·¸ì¸ ì „ -->
        <div id="authSection">
            <div class="hero">
                <span class="hero-badge">ğŸš€ Web3 ì»¤ë®¤ë‹ˆí‹°</span>
                <h1 class="hero-title">ê¸€ ì“°ê³ , ë•… ì‚¬ê³ ,<br><span class="highlight">ë¶€ì ë˜ì!</span></h1>
                <p class="hero-subtitle">ì½˜í…ì¸ ë¥¼ ì‘ì„±í•˜ë©´ BOK í† í°ì„ ë°›ê³ ,<br>ê°€ìƒ ë¶€ë™ì‚°ì— íˆ¬ìí•´ì„œ ì˜í† ë¥¼ í™•ì¥í•˜ì„¸ìš”!</p>
                <div class="stats-bar">
                    <div class="stat-item">
                        <div class="stat-number" id="statUsers">0</div>
                        <div class="stat-label">í™œì„± ìœ ì €</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="statPosts">0</div>
                        <div class="stat-label">ì‘ì„±ëœ ê¸€</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="statLands">0</div>
                        <div class="stat-label">ê±°ë˜ëœ ë•…</div>
                    </div>
                </div>
                <button class="btn-primary" id="loginBtn" style="max-width: 320px;">Google ê³„ì •ìœ¼ë¡œ ì‹œì‘í•˜ê¸°</button>
                <div style="margin-top: 20px;">
                    <input type="text" id="inviteCodeInput" placeholder="ì´ˆëŒ€ ì½”ë“œ ì…ë ¥ (ì„ íƒ)" style="max-width: 200px; text-align: center;">
                </div>
            </div>

            <div class="grid-3">
                <div class="feature-card">
                    <div class="feature-icon">âœï¸</div>
                    <div class="feature-title">ê¸€ì“°ê¸° ë³´ìƒ</div>
                    <div class="feature-desc">ê¸€ í•˜ë‚˜ë‹¹ 100 BOK!<br>ëŒ“ê¸€, ì¢‹ì•„ìš”ë¡œ ì¶”ê°€ ìˆ˜ìµ</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ—ï¸</div>
                    <div class="feature-title">ê²Œì‹œíŒ ì†Œìœ </div>
                    <div class="feature-desc">ë‚˜ë§Œì˜ ê²Œì‹œíŒ ìš´ì˜<br>ì…ì¥ë£Œ, ìˆ˜ìˆ˜ë£Œ ìˆ˜ìµ</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ—ºï¸</div>
                    <div class="feature-title">ë¶€ë™ì‚° íˆ¬ì</div>
                    <div class="feature-desc">ê°€ìƒ ë•… êµ¬ë§¤<br>ëœë¤ ê°€ì¹˜ë¡œ ëŒ€ë°• ì°¬ìŠ¤</div>
                </div>
            </div>
        </div>

        <!-- í™ˆ ëŒ€ì‹œë³´ë“œ -->
        <div id="homeSection" class="hidden">
            <div class="grid-2">
                <!-- ì™¼ìª½: ì¼ì¼ ë¯¸ì…˜ -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ğŸ“‹ ì¼ì¼ ë¯¸ì…˜</h3>
                        <span style="color: var(--text-muted); font-size: 13px;" id="missionReset">00:00:00 í›„ ë¦¬ì…‹</span>
                    </div>
                    <div id="missionList">
                        <div class="mission-item">
                            <div class="mission-info">
                                <div class="mission-icon">âœï¸</div>
                                <div>
                                    <div class="mission-title">ê¸€ì“°ê¸° 1íšŒ</div>
                                    <div class="mission-progress">0/1 ì™„ë£Œ</div>
                                </div>
                            </div>
                            <span class="mission-reward">+100 BOK</span>
                        </div>
                        <div class="mission-item">
                            <div class="mission-info">
                                <div class="mission-icon">ğŸ’¬</div>
                                <div>
                                    <div class="mission-title">ëŒ“ê¸€ 3ê°œ ì‘ì„±</div>
                                    <div class="mission-progress">0/3 ì™„ë£Œ</div>
                                </div>
                            </div>
                            <span class="mission-reward">+30 BOK</span>
                        </div>
                        <div class="mission-item">
                            <div class="mission-info">
                                <div class="mission-icon">â¤ï¸</div>
                                <div>
                                    <div class="mission-title">ì¢‹ì•„ìš” 5ê°œ ëˆ„ë¥´ê¸°</div>
                                    <div class="mission-progress">0/5 ì™„ë£Œ</div>
                                </div>
                            </div>
                            <span class="mission-reward">+10 BOK</span>
                        </div>
                        <div class="mission-item">
                            <div class="mission-info">
                                <div class="mission-icon">ğŸ </div>
                                <div>
                                    <div class="mission-title">ê²Œì‹œíŒ 3ê³³ ë°©ë¬¸</div>
                                    <div class="mission-progress">0/3 ì™„ë£Œ</div>
                                </div>
                            </div>
                            <span class="mission-reward">+20 BOK</span>
                        </div>
                    </div>
                </div>

                <!-- ì˜¤ë¥¸ìª½: ì¶œì„ ë£°ë › -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ğŸ° ì¶œì„ ë£°ë ›</h3>
                    </div>
                    <div class="roulette-container">
                        <div style="position: relative; display: inline-block;">
                            <div class="roulette-pointer">â–¼</div>
                            <div class="roulette-wheel" id="rouletteWheel"></div>
                        </div>
                        <p style="color: var(--text-muted); font-size: 14px; margin-bottom: 16px;">ë§¤ì¼ 1íšŒ 1~500 BOK íšë“!</p>
                        <button class="btn-gold btn-block" id="spinBtn" onclick="spinRoulette()">ğŸ² ëŒë¦¬ê¸°</button>
                    </div>
                </div>
            </div>

            <div class="grid-2" style="margin-top: 20px;">
                <!-- ë­í‚¹ -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ğŸ† ì£¼ê°„ ë­í‚¹</h3>
                        <span style="color: var(--accent); font-size: 13px;">TOP 10 ë³´ìƒ!</span>
                    </div>
                    <div id="rankingList">
                        <div class="ranking-item">
                            <div class="ranking-position gold">1</div>
                            <div class="ranking-name">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                            <div class="ranking-score">- BOK</div>
                        </div>
                    </div>
                </div>

                <!-- ë¹ ë¥¸ ì•¡ì…˜ -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">âš¡ ë¹ ë¥¸ ì•¡ì…˜</h3>
                    </div>
                    <button class="btn-primary btn-block" style="margin-bottom: 12px;" onclick="showSection('boards')">ğŸ“ ê¸€ì“°ê¸° (+100 BOK)</button>
                    <button class="btn-pink btn-block" style="margin-bottom: 12px;" onclick="location.href='market.html'">ğŸ—ºï¸ ë¶€ë™ì‚° ë§ˆì¼“</button>
                    <button class="btn-gold btn-block" style="margin-bottom: 12px;" onclick="openModal('createBoardModal')">ğŸ—ï¸ ê²Œì‹œíŒ ë§Œë“¤ê¸°</button>
                    <button class="btn-outline btn-block" onclick="openModal('inviteModal')">ğŸ‘¥ ì¹œêµ¬ ì´ˆëŒ€ (+300 BOK)</button>
                </div>
            </div>

            <!-- ì¸ê¸° ê²Œì‹œíŒ -->
            <div class="card" style="margin-top: 20px;">
                <div class="card-header">
                    <h3 class="card-title">ğŸ”¥ ì¸ê¸° ê²Œì‹œíŒ</h3>
                    <button class="btn-sm btn-outline" onclick="showSection('boards')">ì „ì²´ë³´ê¸°</button>
                </div>
                <div id="popularBoards"></div>
            </div>
        </div>

        <!-- ê²Œì‹œíŒ ëª©ë¡ -->
        <div id="boardsSection" class="hidden">
            <div class="card-header" style="margin-bottom: 20px;">
                <h2 style="font-size: 24px;">ğŸ“‚ ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œíŒ</h2>
                <button class="btn-gold" onclick="openModal('createBoardModal')">+ ê²Œì‹œíŒ ë§Œë“¤ê¸°</button>
            </div>
            
            <div class="tabs">
                <div class="tab active" onclick="filterBoards('all')">ì „ì²´</div>
                <div class="tab" onclick="filterBoards('my')">ë‚´ ê²Œì‹œíŒ</div>
                <div class="tab" onclick="filterBoards('free')">ë¬´ë£Œ</div>
                <div class="tab" onclick="filterBoards('premium')">í”„ë¦¬ë¯¸ì—„</div>
            </div>

            <div id="boardsList"></div>
        </div>

        <!-- í”„ë¡œí•„ -->
        <div id="profileSection" class="hidden">
            <div class="card">
                <div class="profile-header">
                    <div class="profile-avatar">ğŸ‘¤</div>
                    <div class="profile-info">
                        <h2 id="profileName">ì‚¬ìš©ì</h2>
                        <div class="profile-stats">
                            <span>ğŸ“ ê¸€ <strong id="profilePosts">0</strong></span>
                            <span>ğŸ’¬ ëŒ“ê¸€ <strong id="profileComments">0</strong></span>
                            <span>ğŸ  ê²Œì‹œíŒ <strong id="profileBoards">0</strong></span>
                            <span>ğŸ—ºï¸ ë•… <strong id="profileLands">0</strong></span>
                        </div>
                    </div>
                </div>

                <!-- ë ˆë²¨ & ê²½í—˜ì¹˜ -->
                <div style="background: var(--bg-dark); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-weight: 700;">ë ˆë²¨ <span id="currentLevel">1</span></span>
                        <span style="color: var(--text-muted); font-size: 14px;"><span id="currentExp">0</span> / <span id="nextLevelExp">100</span> EXP</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="expProgress" style="width: 0%;"></div>
                    </div>
                    <p style="font-size: 12px; color: var(--text-muted); margin-top: 8px;">
                        ğŸ’¡ ë ˆë²¨ì—… ë³´ìƒ: ë ˆë²¨ Ã— 100 BOK
                    </p>
                </div>

                <!-- ìì‚° í˜„í™© -->
                <div class="grid-3" style="margin-bottom: 20px;">
                    <div style="background: var(--bg-dark); padding: 16px; border-radius: 12px; text-align: center;">
                        <div style="font-size: 24px; font-weight: 900; color: var(--secondary);" id="totalBok">0</div>
                        <div style="font-size: 12px; color: var(--text-muted);">ë³´ìœ  BOK</div>
                    </div>
                    <div style="background: var(--bg-dark); padding: 16px; border-radius: 12px; text-align: center;">
                        <div style="font-size: 24px; font-weight: 900; color: var(--accent);" id="totalEarned">0</div>
                        <div style="font-size: 12px; color: var(--text-muted);">ëˆ„ì  ìˆ˜ìµ</div>
                    </div>
                    <div style="background: var(--bg-dark); padding: 16px; border-radius: 12px; text-align: center;">
                        <div style="font-size: 24px; font-weight: 900; color: var(--pink);" id="totalSpent">0</div>
                        <div style="font-size: 12px; color: var(--text-muted);">ëˆ„ì  ì†Œë¹„</div>
                    </div>
                </div>
            </div>

            <!-- ì—…ì  -->
            <div class="card" style="margin-top: 20px;">
                <div class="card-header">
                    <h3 class="card-title">ğŸ… ì—…ì </h3>
                    <span style="color: var(--text-muted); font-size: 13px;"><span id="achievementCount">0</span>/12 ë‹¬ì„±</span>
                </div>
                <div id="achievementList">
                    <div class="achievement-item">
                        <div class="achievement-icon achievement-unlocked">âœï¸</div>
                        <div class="achievement-info">
                            <div class="achievement-title">ì²« ê¸€ ì‘ì„±</div>
                            <div class="achievement-desc">ì²« ë²ˆì§¸ ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”</div>
                        </div>
                        <span class="mission-reward">+50 BOK</span>
                    </div>
                    <div class="achievement-item">
                        <div class="achievement-icon achievement-locked">ğŸ“</div>
                        <div class="achievement-info">
                            <div class="achievement-title">ê¸€ì“°ê¸° ë§ˆìŠ¤í„°</div>
                            <div class="achievement-desc">ê¸€ 100ê°œ ì‘ì„±</div>
                        </div>
                        <span style="color: var(--text-muted);">0/100</span>
                    </div>
                    <div class="achievement-item">
                        <div class="achievement-icon achievement-locked">ğŸ—ï¸</div>
                        <div class="achievement-info">
                            <div class="achievement-title">ê²Œì‹œíŒ ì‚¬ì¥ë‹˜</div>
                            <div class="achievement-desc">ê²Œì‹œíŒ ì²« ê°œì„¤</div>
                        </div>
                        <span class="mission-reward">+200 BOK</span>
                    </div>
                    <div class="achievement-item">
                        <div class="achievement-icon achievement-locked">ğŸ—ºï¸</div>
                        <div class="achievement-info">
                            <div class="achievement-title">ë¶€ë™ì‚° ì¬ë²Œ</div>
                            <div class="achievement-desc">ë•… 10ê°œ ì†Œìœ </div>
                        </div>
                        <span style="color: var(--text-muted);">0/10</span>
                    </div>
                    <div class="achievement-item">
                        <div class="achievement-icon achievement-locked">ğŸ‘‘</div>
                        <div class="achievement-info">
                            <div class="achievement-title">ì§€ì—­ ì •ë³µì</div>
                            <div class="achievement-desc">í•œ ì§€ì—­ ìµœëŒ€ ì†Œìœ ì ë‹¬ì„±</div>
                        </div>
                        <span class="mission-reward">+1,000 BOK</span>
                    </div>
                    <div class="achievement-item">
                        <div class="achievement-icon achievement-locked">ğŸ‘¥</div>
                        <div class="achievement-info">
                            <div class="achievement-title">ì¸í”Œë£¨ì–¸ì„œ</div>
                            <div class="achievement-desc">ì¹œêµ¬ 10ëª… ì´ˆëŒ€</div>
                        </div>
                        <span style="color: var(--text-muted);">0/10</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ê²Œì‹œíŒ ìƒì„± ëª¨ë‹¬ -->
    <div class="modal-overlay" id="createBoardModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('createBoardModal')">âœ•</button>
            <h2 class="modal-title">ğŸ—ï¸ ê²Œì‹œíŒ ë§Œë“¤ê¸°</h2>
            
            <div style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 10px; padding: 14px; margin-bottom: 20px; text-align: center;">
                <span style="color: var(--accent); font-weight: 700; font-size: 18px;">ìƒì„± ë¹„ìš©: 1,000 BOK</span>
            </div>

            <label>ê²Œì‹œíŒ ì´ë¦„</label>
            <input type="text" id="boardName" placeholder="ì˜ˆ: ë¹„íŠ¸ì½”ì¸ íˆ¬ìì ëª¨ì„" maxlength="20">
            
            <label>ì„¤ëª…</label>
            <textarea id="boardDesc" rows="3" placeholder="ê²Œì‹œíŒì„ ì†Œê°œí•´ì£¼ì„¸ìš”"></textarea>
            
            <label>ì¹´í…Œê³ ë¦¬</label>
            <select id="boardCategory">
                <option value="general">ğŸ’¬ ììœ </option>
                <option value="investment">ğŸ’° íˆ¬ì</option>
                <option value="game">ğŸ® ê²Œì„</option>
                <option value="tech">ğŸ’» ê¸°ìˆ </option>
                <option value="life">ğŸŒ± ì¼ìƒ</option>
                <option value="humor">ğŸ˜‚ ìœ ë¨¸</option>
            </select>
            
            <label>í…Œë§ˆ ìƒ‰ìƒ</label>
            <input type="color" id="boardColor" value="#6366f1" style="height: 50px; padding: 5px;">
            
            <label>ì•„ì´ì½˜ (ì´ëª¨ì§€)</label>
            <input type="text" id="boardIcon" placeholder="ğŸ“" maxlength="2" style="font-size: 24px; text-align: center;">

            <div style="border-top: 1px solid var(--border); margin: 20px 0; padding-top: 20px;">
                <h4 style="margin-bottom: 12px;">ğŸ’° ìˆ˜ìµí™” ì„¤ì •</h4>
                
                <label>ì…ì¥ë£Œ (0 = ë¬´ë£Œ)</label>
                <input type="number" id="boardEntryFee" value="0" min="0" max="100" placeholder="0~100 BOK">
                
                <label>ê¸€ì“°ê¸° ìˆ˜ìˆ˜ë£Œ (ì‘ì„±ì â†’ ì†Œìœ ì)</label>
                <input type="number" id="boardWriteFee" value="0" min="0" max="50" placeholder="0~50 BOK">
            </div>

            <div style="border-top: 1px solid var(--border); margin: 20px 0; padding-top: 20px;">
                <h4 style="margin-bottom: 12px;">âš™ï¸ ìš´ì˜ ì„¤ì •</h4>
                
                <div class="toggle-row">
                    <span class="toggle-label">ìŠ¹ì¸ì œ ê²Œì‹œíŒ</span>
                    <div class="toggle-switch" id="toggleApproval" onclick="this.classList.toggle('active')"></div>
                </div>
                <div class="toggle-row">
                    <span class="toggle-label">ëŒ“ê¸€ í—ˆìš©</span>
                    <div class="toggle-switch active" id="toggleComments" onclick="this.classList.toggle('active')"></div>
                </div>
            </div>

            <button class="btn-gold btn-block" onclick="createBoard()">ê²Œì‹œíŒ ìƒì„±í•˜ê¸°</button>
        </div>
    </div>

    <!-- ì¹œêµ¬ ì´ˆëŒ€ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="inviteModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('inviteModal')">âœ•</button>
            <h2 class="modal-title">ğŸ‘¥ ì¹œêµ¬ ì´ˆëŒ€</h2>
            
            <div class="invite-box">
                <p style="color: var(--text-muted);">ë‚´ ì´ˆëŒ€ ì½”ë“œ</p>
                <div class="invite-code" id="myInviteCode">ABC123</div>
                <button class="btn-primary btn-sm" onclick="copyInviteCode()">ğŸ“‹ ë³µì‚¬í•˜ê¸°</button>
            </div>
            
            <div style="margin-top: 24px; padding: 16px; background: var(--bg-dark); border-radius: 12px;">
                <h4 style="margin-bottom: 12px;">ğŸ ì´ˆëŒ€ ë³´ìƒ</h4>
                <p style="font-size: 14px; color: var(--text-muted); line-height: 1.6;">
                    â€¢ ì´ˆëŒ€í•œ ì‚¬ëŒ: <strong style="color: var(--success);">+300 BOK</strong><br>
                    â€¢ ì´ˆëŒ€ë°›ì€ ì‚¬ëŒ: <strong style="color: var(--success);">+300 BOK</strong> (ê¸°ë³¸ 500 + 300)
                </p>
            </div>
            
            <div style="margin-top: 20px;">
                <h4 style="margin-bottom: 12px;">ğŸ“Š ì´ˆëŒ€ í˜„í™©</h4>
                <div style="display: flex; justify-content: space-around; text-align: center;">
                    <div>
                        <div style="font-size: 24px; font-weight: 900; color: var(--secondary);" id="inviteCount">0</div>
                        <div style="font-size: 12px; color: var(--text-muted);">ì´ˆëŒ€í•œ ì¹œêµ¬</div>
                    </div>
                    <div>
                        <div style="font-size: 24px; font-weight: 900; color: var(--accent);" id="inviteEarned">0</div>
                        <div style="font-size: 12px; color: var(--text-muted);">íšë“ BOK</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ë£°ë › ê²°ê³¼ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="rouletteResultModal">
        <div class="modal-content" style="text-align: center;">
            <h2 class="modal-title">ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤!</h2>
            <div style="font-size: 48px; margin: 20px 0;">ğŸ°</div>
            <div style="font-size: 36px; font-weight: 900; color: var(--accent); margin-bottom: 20px;">
                +<span id="rouletteResult">0</span> BOK
            </div>
            <button class="btn-primary btn-block" onclick="closeModal('rouletteResultModal')">í™•ì¸</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getFirestore, collection, doc, setDoc, getDoc, getDocs, updateDoc, onSnapshot, query, orderBy, where, increment, runTransaction, limit } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBwQjuqgWM4YKnqu_gzNbeCg5alrC-jVcQ",
            authDomain: "myco-737a0.firebaseapp.com",
            projectId: "myco-737a0",
            storageBucket: "myco-737a0.firebasestorage.app",
            messagingSenderId: "942571332540",
            appId: "1:942571332540:web:be0bb6fbdd32655501c1b9"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        let currentUser = null;
        let userData = null;

        // í†µê³„ ë¡œë“œ
        async function loadStats() {
            try {
                const [users, posts, lands] = await Promise.all([
                    getDocs(collection(db, "users")),
                    getDocs(collection(db, "posts")),
                    getDocs(collection(db, "lands"))
                ]);
                document.getElementById("statUsers").textContent = users.size;
                document.getElementById("statPosts").textContent = posts.size;
                document.getElementById("statLands").textContent = lands.size;
            } catch(e) { console.error(e); }
        }
        loadStats();

        // ë¡œê·¸ì¸
        document.getElementById("loginBtn").addEventListener("click", async () => {
            const inviteCode = document.getElementById("inviteCodeInput").value.trim();
            try {
                const result = await signInWithPopup(auth, new GoogleAuthProvider());
                // ì´ˆëŒ€ ì½”ë“œ ì²˜ë¦¬
                if(inviteCode && result.user) {
                    await processInviteCode(result.user.uid, inviteCode);
                }
            } catch(e) { console.error(e); }
        });

        // ì´ˆëŒ€ ì½”ë“œ ì²˜ë¦¬
        async function processInviteCode(newUserId, code) {
            try {
                const inviterQuery = query(collection(db, "users"), where("inviteCode", "==", code));
                const snapshot = await getDocs(inviterQuery);
                if(!snapshot.empty) {
                    const inviterDoc = snapshot.docs[0];
                    if(inviterDoc.id !== newUserId) {
                        // ì´ˆëŒ€ìì—ê²Œ ë³´ìƒ
                        await updateDoc(inviterDoc.ref, { 
                            coin: increment(300),
                            inviteCount: increment(1),
                            totalEarned: increment(300)
                        });
                        // í”¼ì´ˆëŒ€ìì—ê²Œ ì¶”ê°€ ë³´ìƒ
                        await updateDoc(doc(db, "users", newUserId), { 
                            coin: increment(300),
                            invitedBy: inviterDoc.id
                        });
                    }
                }
            } catch(e) { console.error(e); }
        }

        // ì¸ì¦ ìƒíƒœ ë³€ê²½
        onAuthStateChanged(auth, async (user) => {
            if(user) {
                currentUser = user;
                document.getElementById("authSection").classList.add("hidden");
                document.getElementById("homeSection").classList.remove("hidden");
                document.getElementById("navLinks").style.display = "flex";

                // ìœ ì € ë°ì´í„° ë¡œë“œ/ìƒì„±
                const userRef = doc(db, "users", user.uid);
                onSnapshot(userRef, async (docSnap) => {
                    if(!docSnap.exists()) {
                        // ì‹ ê·œ ìœ ì € ìƒì„±
                        const inviteCode = generateInviteCode();
                        await setDoc(userRef, {
                            name: user.displayName,
                            email: user.email,
                            coin: 500,
                            exp: 0,
                            level: 1,
                            totalEarned: 500,
                            totalSpent: 0,
                            postCount: 0,
                            commentCount: 0,
                            inviteCode: inviteCode,
                            inviteCount: 0,
                            lastRoulette: null,
                            createdAt: new Date().toISOString()
                        });
                    }
                    userData = docSnap.data();
                    updateUI();
                });

                loadBoards();
                loadRanking();
            } else {
                document.getElementById("authSection").classList.remove("hidden");
                document.getElementById("homeSection").classList.add("hidden");
                document.getElementById("boardsSection").classList.add("hidden");
                document.getElementById("profileSection").classList.add("hidden");
            }
        });

        function generateInviteCode() {
            return Math.random().toString(36).substring(2, 8).toUpperCase();
        }

        function updateUI() {
            if(!userData) return;
            
            // ì§€ê°‘
            document.getElementById("walletBadge").innerHTML = `ğŸ’° ${userData.coin?.toLocaleString() || 0} BOK`;
            
            // ë ˆë²¨
            const level = userData.level || 1;
            document.getElementById("levelBadge").textContent = `Lv.${level}`;
            document.getElementById("currentLevel").textContent = level;
            
            // ê²½í—˜ì¹˜
            const exp = userData.exp || 0;
            const nextExp = level * 100;
            document.getElementById("currentExp").textContent = exp;
            document.getElementById("nextLevelExp").textContent = nextExp;
            document.getElementById("expProgress").style.width = `${(exp / nextExp) * 100}%`;
            
            // í”„ë¡œí•„
            document.getElementById("profileName").textContent = userData.name || "ì‚¬ìš©ì";
            document.getElementById("profilePosts").textContent = userData.postCount || 0;
            document.getElementById("profileComments").textContent = userData.commentCount || 0;
            document.getElementById("totalBok").textContent = (userData.coin || 0).toLocaleString();
            document.getElementById("totalEarned").textContent = (userData.totalEarned || 0).toLocaleString();
            document.getElementById("totalSpent").textContent = (userData.totalSpent || 0).toLocaleString();
            
            // ì´ˆëŒ€
            document.getElementById("myInviteCode").textContent = userData.inviteCode || "------";
            document.getElementById("inviteCount").textContent = userData.inviteCount || 0;
            document.getElementById("inviteEarned").textContent = ((userData.inviteCount || 0) * 300).toLocaleString();
            
            // ë£°ë › ë²„íŠ¼ ìƒíƒœ
            const lastRoulette = userData.lastRoulette;
            const today = new Date().toDateString();
            if(lastRoulette && new Date(lastRoulette).toDateString() === today) {
                document.getElementById("spinBtn").disabled = true;
                document.getElementById("spinBtn").textContent = "âœ… ì˜¤ëŠ˜ ì™„ë£Œ";
            }
        }

        // ê²Œì‹œíŒ ë¡œë“œ
        async function loadBoards() {
            const q = query(collection(db, "boards"), orderBy("createdAt", "desc"));
            onSnapshot(q, (snapshot) => {
                const list = document.getElementById("boardsList");
                const popular = document.getElementById("popularBoards");
                list.innerHTML = "";
                popular.innerHTML = "";
                
                if(snapshot.empty) {
                    list.innerHTML = '<p style="text-align:center; color: var(--text-muted); padding: 40px;">ì•„ì§ ê²Œì‹œíŒì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                    return;
                }
                
                let count = 0;
                snapshot.forEach(docSnap => {
                    const b = docSnap.data();
                    const html = createBoardItem(docSnap.id, b);
                    list.innerHTML += html;
                    if(count < 3) popular.innerHTML += html;
                    count++;
                });
            });
        }

        function createBoardItem(id, b) {
            const feeText = (b.entryFee > 0) ? `<span class="board-fee">${b.entryFee} BOK</span>` : '<span style="color: var(--success); font-size: 12px;">ë¬´ë£Œ</span>';
            return `
                <div class="board-item" onclick="location.href='board.html?id=${id}'">
                    <div class="board-icon" style="background: ${b.color || '#6366f1'};">${b.icon || 'ğŸ“'}</div>
                    <div class="board-info">
                        <div class="board-name">${b.name}</div>
                        <div class="board-meta">${b.description || 'ì„¤ëª… ì—†ìŒ'}</div>
                    </div>
                    <div style="text-align: right;">
                        ${feeText}
                        <div class="board-stats" style="margin-top: 4px;">
                            <span>ğŸ‘¤ ${b.memberCount || 0}</span>
                            <span>ğŸ“ ${b.postCount || 0}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // ë­í‚¹ ë¡œë“œ
        async function loadRanking() {
            const q = query(collection(db, "users"), orderBy("totalEarned", "desc"), limit(10));
            const snapshot = await getDocs(q);
            const list = document.getElementById("rankingList");
            list.innerHTML = "";
            
            let rank = 1;
            snapshot.forEach(docSnap => {
                const u = docSnap.data();
                const posClass = rank === 1 ? 'gold' : rank === 2 ? 'silver' : rank === 3 ? 'bronze' : '';
                list.innerHTML += `
                    <div class="ranking-item">
                        <div class="ranking-position ${posClass}">${rank}</div>
                        <div class="ranking-name">${u.name || 'ìµëª…'}</div>
                        <div class="ranking-score">${(u.totalEarned || 0).toLocaleString()} BOK</div>
                    </div>
                `;
                rank++;
            });
        }

        // ê²Œì‹œíŒ ìƒì„±
        window.createBoard = async function() {
            if(!currentUser || !userData) return alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            if(userData.coin < 1000) return alert("BOKì´ ë¶€ì¡±í•©ë‹ˆë‹¤. (í•„ìš”: 1,000 BOK)");
            
            const name = document.getElementById("boardName").value.trim();
            const desc = document.getElementById("boardDesc").value.trim();
            const category = document.getElementById("boardCategory").value;
            const color = document.getElementById("boardColor").value;
            const icon = document.getElementById("boardIcon").value || "ğŸ“";
            const entryFee = parseInt(document.getElementById("boardEntryFee").value) || 0;
            const writeFee = parseInt(document.getElementById("boardWriteFee").value) || 0;
            const approval = document.getElementById("toggleApproval").classList.contains("active");
            const comments = document.getElementById("toggleComments").classList.contains("active");
            
            if(!name) return alert("ê²Œì‹œíŒ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.");
            
            try {
                await runTransaction(db, async (t) => {
                    const userRef = doc(db, "users", currentUser.uid);
                    t.update(userRef, { 
                        coin: increment(-1000),
                        totalSpent: increment(1000)
                    });
                    
                    const boardRef = doc(collection(db, "boards"));
                    t.set(boardRef, {
                        name, description: desc, category, color, icon,
                        entryFee, writeFee,
                        requireApproval: approval,
                        allowComments: comments,
                        ownerUid: currentUser.uid,
                        ownerName: currentUser.displayName,
                        memberCount: 1,
                        postCount: 0,
                        createdAt: new Date().toISOString()
                    });
                });
                
                alert("ğŸ‰ ê²Œì‹œíŒì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!");
                closeModal('createBoardModal');
            } catch(e) { alert("ì˜¤ë¥˜: " + e.message); }
        };

        // ë£°ë ›
        window.spinRoulette = async function() {
            if(!currentUser || !userData) return;
            
            const lastRoulette = userData.lastRoulette;
            const today = new Date().toDateString();
            if(lastRoulette && new Date(lastRoulette).toDateString() === today) {
                return alert("ì˜¤ëŠ˜ì€ ì´ë¯¸ ëŒë¦¬ì…¨ìŠµë‹ˆë‹¤!");
            }
            
            const btn = document.getElementById("spinBtn");
            btn.disabled = true;
            
            // ë£°ë › ì• ë‹ˆë©”ì´ì…˜
            const wheel = document.getElementById("rouletteWheel");
            const randomDeg = 1800 + Math.random() * 360;
            wheel.style.transform = `rotate(${randomDeg}deg)`;
            
            // ê²°ê³¼ ê³„ì‚° (1~500 ê°€ì¤‘ì¹˜)
            const rand = Math.random();
            let reward;
            if(rand < 0.5) reward = Math.floor(Math.random() * 50) + 1;        // 50%: 1~50
            else if(rand < 0.8) reward = Math.floor(Math.random() * 100) + 50; // 30%: 50~150
            else if(rand < 0.95) reward = Math.floor(Math.random() * 150) + 150; // 15%: 150~300
            else reward = Math.floor(Math.random() * 200) + 300;               // 5%: 300~500
            
            setTimeout(async () => {
                await updateDoc(doc(db, "users", currentUser.uid), {
                    coin: increment(reward),
                    totalEarned: increment(reward),
                    lastRoulette: new Date().toISOString()
                });
                
                document.getElementById("rouletteResult").textContent = reward;
                openModal('rouletteResultModal');
                btn.textContent = "âœ… ì˜¤ëŠ˜ ì™„ë£Œ";
            }, 3000);
        };

        // ì„¹ì…˜ ì „í™˜
        window.showSection = function(section) {
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            document.getElementById("homeSection").classList.add("hidden");
            document.getElementById("boardsSection").classList.add("hidden");
            document.getElementById("profileSection").classList.add("hidden");
            
            if(section === 'home') {
                document.getElementById("homeSection").classList.remove("hidden");
                document.querySelector('.nav-link').classList.add('active');
            } else if(section === 'boards') {
                document.getElementById("boardsSection").classList.remove("hidden");
            } else if(section === 'profile') {
                document.getElementById("profileSection").classList.remove("hidden");
            }
        };

        // ëª¨ë‹¬
        window.openModal = function(id) {
            document.getElementById(id).style.display = "flex";
        };
        window.closeModal = function(id) {
            document.getElementById(id).style.display = "none";
        };

        // ì´ˆëŒ€ ì½”ë“œ ë³µì‚¬
        window.copyInviteCode = function() {
            const code = document.getElementById("myInviteCode").textContent;
            navigator.clipboard.writeText(code);
            alert("ì´ˆëŒ€ ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
        };

        // ê²Œì‹œíŒ í•„í„°
        window.filterBoards = function(type) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            // í•„í„° ë¡œì§ êµ¬í˜„ (ìƒëµ)
        };
    </script>
</body>
</html>
